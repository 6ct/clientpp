{
  "title": "Userscript",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Name of the userscript"
    },
    "author": {
      "type": "string",
      "description": "Namespace to associate the userscript with"
    },
    "description": {
      "type": "string",
      "description": "Small description of the userscript"
    },
    "version": {
      "type": ["string", "number"],
      "description": "Version of the userscript"
    },
    "locations": {
      "type": "array",
      "description": "Locations the script will run at",
      "items": [
        {
          "type": "string",
          "enum": ["all", "game", "social", "editor"]
        }
      ],
      "additionalItems": false
    },
    "features": {
      "type": "object",
      "description": "APIs to configure/provide to the script",
      "properties": {
        "block_hosts": {
          "type": "array",
          "items": {
            "type": "string",
            "description": "Apex record/subdomain to match. All subdomains of the hostname will be matched."
          }
        },
        "command_line": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^--",
            "description": "Chrome command line flag to add at startup."
          }
        },
        "gui": {
          "type": "object",
          "patternProperties": {
            "^.*$": {
              "type": "object",
              "patternProperties": {
                "^.*$": {
                  "type": "object",
                  "description": "Key will be the category title.",
                  "properties": {
                    "type": {
                      "type": "string",
                      "description": "Type of control to create"
                    },
                    "walk": {
                      "type": "string",
                      "description": "Config path to save value to."
                    },
                    "change": {
                      "type": "string",
                      "description": "Reference to exported function. Ie if change = 'changeGUI', exports.changeGUI must be set to receive the event"
                    }
                  },
                  "required": ["type"],
                  "additionalProperties": true
                }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        },
        "libs": {
          "type": "object",
          "description": "Built-in libraries to expose to the userscript",
          "properties": {
            "utils": {
              "type": "boolean",
              "description": "If metadata.features.libs.utils will be exposed"
            }
          },
          "additionalProperties": false
        },
        "config": {
          "description": "A JSON-serializable config. Changes will be reflected in metadata.config.",
          "additionalProperties": true
        }
      },
      "additionalItems": false
    }
  },
  "required": ["author"],
  "additionalItems": false
}
